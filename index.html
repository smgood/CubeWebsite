<!DOCTYPE html>
<html lang="en">
<head>

<!--

Like what you see? Message me at sean@smgoodrich.com

Thanks,
Sean
 ______     ______     ______     ______
/\  ___\   /\  ___\   /\  __ \   /\   \ \
\ \___  \  \ \  __\   \ \  __ \  \ \ \ \ \
 \/\_____\  \ \_____\  \ \_\ \_\  \ \_\___\
  \/_____/   \/_____/   \/_/\/_/   \/_/___/

-->

    <title>Cubes</title>
    <meta charset="utf-8">
    <meta name="description" content="3D website to experiment with cube animations.">
    <meta name="author" content="Sean Goodrich">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="keywords" content="Sean, Goodrich, webGL, cubes">

    <link rel="stylesheet" type="text/css" href="css/MainStyleSheet.css" />

    <!-- favicon -->
    <link rel="icon" type="image/x-icon" sizes="16x16" href="favicon/favicon.ico">

    <!-- public libraries -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
    <script src="js/libraries/three.min.js"></script>
    <script src="js/libraries/stats.min.js"></script>
    <script src='js/libraries/dat.gui.min.js'></script>

    <!-- scene -->
    <script src="js/manager.js"></script>
    <script src="js/scene.js"></script>
    <script src="js/wall.js"></script>
    <script src="js/cube.js"></script>
    <script src="js/face.js"></script>

    <!-- animations -->
    <script src="js/animations/scroll.js"></script>
    <script src="js/animations/gravity.js"></script>
    <script src="js/animations/tetris.js"></script>

    <script>
        $(document).ready(function() {

            var parameters  = {
                rows: 10,
                columns: 10,
                depth: 10,
                animation: 'gravity',
                image: './images/picasso.jpg',
                transition: 'exit',
            };

            var manager = new Manager(parameters);

            // change parameters ui
            var checkboxes = {
                animations: {
                    scroll: false,
                    gravity: true,
                    tetris: false,
                },
                images: {
                    picasso: true,
                    monet: false,
                },
                transitions: {
                    enter: false,
                    exit: true,
                },
            };

            var sceneChanger = function( ) {
                manager.dispose();
                manager = new Manager(parameters);
            };
            var gui = new dat.GUI();
            gui.add( parameters, "rows", 1, 20,  1 ).onChange( sceneChanger );
            gui.add( parameters, "columns", 1, 20, 1 ).onChange( sceneChanger );
            gui.add( parameters, "depth", 1, 100, 1 ).onChange( sceneChanger );

            var selectedImage = gui.addFolder("Image");
            selectedImage.add(checkboxes.images, 'picasso').name('picasso').listen().onChange(function(){setChecked("picasso")});
            selectedImage.add(checkboxes.images, 'monet').name('monet').listen().onChange(function(){setChecked("monet")});

            function setChecked( prop ){
                for (let param in checkboxes.images){
                    checkboxes.images[param] = false;
                }
                checkboxes.images[prop] = true;
                parameters.image = './images/' + prop + '.jpg';
                sceneChanger();
            }

            var selectedAnimation = gui.addFolder("Animation");
            selectedAnimation.add(checkboxes.animations, 'scroll').name('scroll').listen().onChange(function(){setCheckedAnimation("scroll")});
            selectedAnimation.add(checkboxes.animations, 'gravity').name('gravity').listen().onChange(function(){setCheckedAnimation("gravity")});
            selectedAnimation.add(checkboxes.animations, 'tetris').name('tetris').listen().onChange(function(){setCheckedAnimation("tetris")});

            function setCheckedAnimation( prop ){
                for (let param in checkboxes.animations){
                    checkboxes.animations[param] = false;
                }
                checkboxes.animations[prop] = true;
                parameters.animation = prop;
                sceneChanger();
            }

            var selectedTransition = gui.addFolder("Transition");
            selectedTransition.add(checkboxes.transitions, 'enter').name('enter').listen().onChange(function(){setCheckedTransition("enter")});
            selectedTransition.add(checkboxes.transitions, 'exit').name('exit').listen().onChange(function(){setCheckedTransition("exit")});

            function setCheckedTransition( prop ){
                for (let param in checkboxes.transitions){
                    checkboxes.transitions[param] = false;
                }
                checkboxes.transitions[prop] = true;
                parameters.transition = prop;
                sceneChanger();
            }

            $('.dg').css('zIndex', '1');
            $('.dg').css('marginRight', '0px');

            // fps ui
            var stats = new Stats();
            $(document.body).append( stats.dom );
            updateStats();
            function updateStats() {
                stats.update();
                requestAnimationFrame( updateStats );
            }
        });
    </script>

</head>
